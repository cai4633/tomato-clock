var host = getApp().globalData.host;
var _http = function (method, path, data) {
    return new Promise(function (resolve, reject) {
        wx.request({
            method: method,
            url: "" + host + path,
            data: data,
            success: function (res) {
                var statusCode = res.statusCode;
                console.log(res);
                if (statusCode >= 400) {
                    if (statusCode === 401) {
                        wx.redirectTo({
                            url: '/pages/login/login',
                        });
                    }
                    reject(res);
                }
                else {
                    resolve(res);
                }
            },
            fail: function (error) {
                wx.showToast({
                    title: '请求失败',
                });
                reject(error);
            }
        });
    }).catch(function (e) {
        console.log(e);
    });
};
export var http = {
    get: function (path, param) { return _http('GET', path, param); },
    post: function (path, data) { return _http('POST', path, data); },
    put: function (path, data) { return _http('PUT', path, data); },
    delete: function (path, data) { return _http('DELETE', path, data); },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaHR0cC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImh0dHAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBT1EsSUFBQSwrQkFBSSxDQUF3QjtBQUNwQyxJQUFNLEtBQUssR0FBRyxVQUFDLE1BQWlELEVBQUUsSUFBWSxFQUFFLElBQVM7SUFDdkYsT0FBTyxJQUFJLE9BQU8sQ0FBbUIsVUFBQyxPQUFPLEVBQUUsTUFBTTtRQUNuRCxFQUFFLENBQUMsT0FBTyxDQUFDO1lBQ1QsTUFBTSxRQUFBO1lBQ04sR0FBRyxFQUFFLEtBQUcsSUFBSSxHQUFHLElBQU07WUFDckIsSUFBSSxNQUFBO1lBQ0osT0FBTyxFQUFFLFVBQUMsR0FBbUQ7Z0JBRXpELElBQUEsMkJBQVUsQ0FDTDtnQkFDUCxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUVqQixJQUFJLFVBQVUsSUFBSSxHQUFHLEVBQUU7b0JBQ3JCLElBQUksVUFBVSxLQUFLLEdBQUcsRUFBRTt3QkFDdEIsRUFBRSxDQUFDLFVBQVUsQ0FBQzs0QkFDWixHQUFHLEVBQUUsb0JBQW9CO3lCQUMxQixDQUFDLENBQUE7cUJBQ0g7b0JBQ0QsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFBO2lCQUNaO3FCQUFNO29CQUNMLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQTtpQkFDYjtZQUNILENBQUM7WUFDRCxJQUFJLFlBQUMsS0FBSztnQkFDUixFQUFFLENBQUMsU0FBUyxDQUFDO29CQUNYLEtBQUssRUFBRSxNQUFNO2lCQUNkLENBQUMsQ0FBQTtnQkFDRixNQUFNLENBQUMsS0FBSyxDQUFDLENBQUE7WUFDZixDQUFDO1NBQ0YsQ0FBQyxDQUFBO0lBQ0osQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFVBQUMsQ0FBTTtRQUNkLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDakIsQ0FBQyxDQUFDLENBQUE7QUFDSixDQUFDLENBQUE7QUFFRCxNQUFNLENBQUMsSUFBTSxJQUFJLEdBQUc7SUFDbEIsR0FBRyxFQUFFLFVBQUMsSUFBWSxFQUFFLEtBQVcsSUFBSyxPQUFBLEtBQUssQ0FBQyxLQUFLLEVBQUUsSUFBSSxFQUFFLEtBQUssQ0FBQyxFQUF6QixDQUF5QjtJQUM3RCxJQUFJLEVBQUUsVUFBQyxJQUFZLEVBQUUsSUFBVSxJQUFLLE9BQUEsS0FBSyxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQXpCLENBQXlCO0lBQzdELEdBQUcsRUFBRSxVQUFDLElBQVksRUFBRSxJQUFTLElBQUssT0FBQSxLQUFLLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsRUFBeEIsQ0FBd0I7SUFDMUQsTUFBTSxFQUFFLFVBQUMsSUFBWSxFQUFFLElBQVMsSUFBSyxPQUFBLEtBQUssQ0FBQyxRQUFRLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUEzQixDQUEyQjtDQUNqRSxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW50ZXJmYWNlIFByb21pc2VWYWx1ZVR5cGUge1xyXG4gIGRhdGE6IHN0cmluZyB8IFdlY2hhdE1pbmlwcm9ncmFtLklBbnlPYmplY3RcclxuICBoZWFkZXI6IFdlY2hhdE1pbmlwcm9ncmFtLklBbnlPYmplY3RcclxuICBzdGF0dXNDb2RlOiBudW1iZXJcclxuICBlcnJNc2c6IHN0cmluZ1xyXG59XHJcblxyXG5jb25zdCB7IGhvc3QgfSA9IGdldEFwcCgpLmdsb2JhbERhdGFcclxuY29uc3QgX2h0dHAgPSAobWV0aG9kOiBXZWNoYXRNaW5pcHJvZ3JhbS5SZXF1ZXN0T3B0aW9uWydtZXRob2QnXSwgcGF0aDogc3RyaW5nLCBkYXRhOiBhbnkpID0+IHtcclxuICByZXR1cm4gbmV3IFByb21pc2U8UHJvbWlzZVZhbHVlVHlwZT4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgd3gucmVxdWVzdCh7XHJcbiAgICAgIG1ldGhvZCxcclxuICAgICAgdXJsOiBgJHtob3N0fSR7cGF0aH1gLFxyXG4gICAgICBkYXRhLFxyXG4gICAgICBzdWNjZXNzOiAocmVzOiBXZWNoYXRNaW5pcHJvZ3JhbS5SZXF1ZXN0U3VjY2Vzc0NhbGxiYWNrUmVzdWx0KSA9PiB7XHJcbiAgICAgICAgY29uc3Qge1xyXG4gICAgICAgICAgc3RhdHVzQ29kZVxyXG4gICAgICAgIH0gPSByZXNcclxuICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG5cclxuICAgICAgICBpZiAoc3RhdHVzQ29kZSA+PSA0MDApIHtcclxuICAgICAgICAgIGlmIChzdGF0dXNDb2RlID09PSA0MDEpIHtcclxuICAgICAgICAgICAgd3gucmVkaXJlY3RUbyh7XHJcbiAgICAgICAgICAgICAgdXJsOiAnL3BhZ2VzL2xvZ2luL2xvZ2luJyxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJlamVjdChyZXMpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJlc29sdmUocmVzKVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgZmFpbChlcnJvcikge1xyXG4gICAgICAgIHd4LnNob3dUb2FzdCh7XHJcbiAgICAgICAgICB0aXRsZTogJ+ivt+axguWksei0pScsXHJcbiAgICAgICAgfSlcclxuICAgICAgICByZWplY3QoZXJyb3IpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfSkuY2F0Y2goKGU6IGFueSkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZSk7XHJcbiAgfSlcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGh0dHAgPSB7XHJcbiAgZ2V0OiAocGF0aDogc3RyaW5nLCBwYXJhbT86IGFueSkgPT4gX2h0dHAoJ0dFVCcsIHBhdGgsIHBhcmFtKSxcclxuICBwb3N0OiAocGF0aDogc3RyaW5nLCBkYXRhPzogYW55KSA9PiBfaHR0cCgnUE9TVCcsIHBhdGgsIGRhdGEpLFxyXG4gIHB1dDogKHBhdGg6IHN0cmluZywgZGF0YTogYW55KSA9PiBfaHR0cCgnUFVUJywgcGF0aCwgZGF0YSksXHJcbiAgZGVsZXRlOiAocGF0aDogc3RyaW5nLCBkYXRhOiBhbnkpID0+IF9odHRwKCdERUxFVEUnLCBwYXRoLCBkYXRhKSxcclxufSJdfQ==