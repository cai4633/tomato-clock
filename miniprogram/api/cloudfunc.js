wx.cloud.init({
    env: 'tomato-clock-9ga9k3bv3918b714',
});
export function secureCheck(content) {
    var sec = true;
    return new Promise(function (resolve, reject) {
        wx.cloud.callFunction({
            name: 'msgSecCheck',
            data: {
                content: content
            },
            success: function (res) {
                if (res && typeof res.result === 'object') {
                    sec = (res.result.errCode === 0);
                }
            },
            fail: function () {
                sec = false;
            },
            complete: function (value) {
                if (!sec) {
                    wx.showToast({
                        title: '文本含有违法违规内容',
                        icon: 'none',
                        mask: true,
                    });
                    reject(value);
                }
                else {
                    resolve(value);
                }
            }
        });
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xvdWRmdW5jLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiY2xvdWRmdW5jLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDO0lBQ1YsR0FBRyxFQUFFLCtCQUErQjtDQUN2QyxDQUFDLENBQUM7QUFFSCxNQUFNLFVBQVUsV0FBVyxDQUFDLE9BQWU7SUFDdkMsSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDO0lBQ2YsT0FBTyxJQUFJLE9BQU8sQ0FBQyxVQUFDLE9BQU8sRUFBRSxNQUFNO1FBQy9CLEVBQUUsQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDO1lBQ2xCLElBQUksRUFBRSxhQUFhO1lBQ25CLElBQUksRUFBRTtnQkFDRixPQUFPLFNBQUE7YUFDVjtZQUNELE9BQU8sRUFBRSxVQUFVLEdBQUc7Z0JBQ2xCLElBQUksR0FBRyxJQUFJLE9BQU8sR0FBRyxDQUFDLE1BQU0sS0FBSyxRQUFRLEVBQUU7b0JBQ3ZDLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsT0FBTyxLQUFLLENBQUMsQ0FBQyxDQUFDO2lCQUNwQztZQUNMLENBQUM7WUFDRCxJQUFJLEVBQUU7Z0JBQ0YsR0FBRyxHQUFHLEtBQUssQ0FBQztZQUNoQixDQUFDO1lBQ0QsUUFBUSxFQUFFLFVBQVUsS0FBSztnQkFDckIsSUFBSSxDQUFDLEdBQUcsRUFBRTtvQkFDTixFQUFFLENBQUMsU0FBUyxDQUFDO3dCQUNULEtBQUssRUFBRSxZQUFZO3dCQUNuQixJQUFJLEVBQUUsTUFBTTt3QkFDWixJQUFJLEVBQUUsSUFBSTtxQkFDYixDQUFDLENBQUM7b0JBQ0gsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFBO2lCQUNoQjtxQkFBTTtvQkFDSCxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUE7aUJBQ2pCO1lBQ0wsQ0FBQztTQUNKLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFBO0FBQ04sQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbInd4LmNsb3VkLmluaXQoe1xyXG4gICAgZW52OiAndG9tYXRvLWNsb2NrLTlnYTlrM2J2MzkxOGI3MTQnLFxyXG59KTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZWN1cmVDaGVjayhjb250ZW50OiBzdHJpbmcpIHtcclxuICAgIGxldCBzZWMgPSB0cnVlO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB3eC5jbG91ZC5jYWxsRnVuY3Rpb24oe1xyXG4gICAgICAgICAgICBuYW1lOiAnbXNnU2VjQ2hlY2snLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXMgJiYgdHlwZW9mIHJlcy5yZXN1bHQgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VjID0gKHJlcy5yZXN1bHQuZXJyQ29kZSA9PT0gMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZhaWw6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHNlYyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNlYykge1xyXG4gICAgICAgICAgICAgICAgICAgIHd4LnNob3dUb2FzdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5paH5pys5ZCr5pyJ6L+d5rOV6L+d6KeE5YaF5a65JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ25vbmUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXNrOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCh2YWx1ZSlcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh2YWx1ZSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSlcclxufSJdfQ==